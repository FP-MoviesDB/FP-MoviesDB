jQuery(document).ready((function($){function updatePagination($parent,currentPage,totalPages){$parent.find(".page_number").text(currentPage),currentPage<=1?($parent.find(".pagination-left").css({"pointer-events":"none",opacity:.3}),$parent.find(".pagination-left-pc").css({"pointer-events":"none",opacity:.3})):($parent.find(".pagination-left").css({"pointer-events":"auto",opacity:1}),$parent.find(".pagination-left-pc").css({"pointer-events":"auto",opacity:1})),currentPage>=totalPages?($parent.find(".pagination-right").css({"pointer-events":"none",opacity:.3}),$parent.find(".pagination-right-pc").css({"pointer-events":"none",opacity:.3})):($parent.find(".pagination-right").css({"pointer-events":"auto",opacity:1}),$parent.find(".pagination-right-pc").css({"pointer-events":"auto",opacity:1}))}function loadPosts(container,data,page){data.page=page,data.action="fp_load_posts","function"==typeof fpLog&&fpLog("JS","Loading posts with data: "+JSON.stringify(data)),$.ajax({url:data.ajax_url,type:"POST",data:data,success:function(response){if(response.success){container.html(response.data.content);var currentPage=page,totalPages=response.data.max_num_pages;updatePagination(container.closest(".fp-homepage-grid-wrapper-main"),currentPage,totalPages)}else"function"==typeof fpLog&&fpLog("JS","Error loading posts: "+JSON.stringify(response))},error:function(response){"function"==typeof fpLog&&fpLog("JS","Error loading posts: "+JSON.stringify(response))}})}$(".fp-homepage-grid-wrapper-main").each((function(){var $this=$(this),instanceID=$this.data("instance-id"),initialData=fp_homepage_data[instanceID];if(initialData){var $currentPageNumber=$this.find(".page_number-pc"),totalPages=parseInt($this.find(".fp-homepage-grid-parent").attr("data-total-pages"))||1,currentPage=parseInt($currentPageNumber.text())||1;updatePagination($this,currentPage,totalPages),$this.find(".pagination-left").on("click",(function(){currentPage>1&&(currentPage--,loadPosts($this.find(".fp-homepage-grid"),initialData,currentPage),$currentPageNumber.text(currentPage),updatePagination($this,currentPage,totalPages))})),$this.find(".pagination-right").on("click",(function(){++currentPage<=totalPages&&(loadPosts($this.find(".fp-homepage-grid"),initialData,currentPage),$currentPageNumber.text(currentPage),updatePagination($this,currentPage,totalPages))})),$this.find(".end-tab-item").on("click",(function(){var sortType=$(this).attr("id");"function"==typeof fpLog&&fpLog("JS","Sorting by: "+sortType),initialData.home_data.sort_type=sortType,"function"==typeof fpLog&&fpLog("JS","Initial data: "+JSON.stringify(initialData)),initialData.page=1,loadPosts($this.find(".fp-homepage-grid"),initialData,1),$this.find(".end-tab-item").removeClass("active"),$(this).addClass("active"),$this.find(".page_number").text(1),updatePagination($this,1,totalPages)}))}else"function"==typeof fpLog&&fpLog("JS","Initial data not found for instance ID: "+instanceID)})),$(".image-slider-wrapper").each((function(index,sliderWrapper){var autoSlideInterval,$sliderWrapper=$(sliderWrapper),$slides=$sliderWrapper.find(".slide"),currentSlide=0,totalSlides=$slides.length;if(1===totalSlides&&$sliderWrapper.find(".prev-slide, .next-slide").css({cursor:"not-allowed"}),0!==totalSlides){$sliderWrapper.find(".next-slide").on("click",(function(){currentSlide<totalSlides-1?currentSlide++:currentSlide=0,startAutoSlide(),moveSlider()})),$sliderWrapper.find(".prev-slide").on("click",(function(){currentSlide>0?currentSlide--:currentSlide=totalSlides-1,startAutoSlide(),moveSlider()})),$(window).on("resize",(function(){moveSlider()})),moveSlider();var isInteracting=!1,startPos=0;$sliderWrapper.on("mousedown",startInteraction),$(document).on("mousemove",moveInteraction),$(document).on("mouseup",endInteraction),$sliderWrapper.on("touchstart",startInteraction),$(document).on("touchmove",moveInteraction),$(document).on("touchend",endInteraction),$sliderWrapper.css("cursor","grab"),startAutoSlide()}function moveSlider(){var slideWidth=$sliderWrapper.width(),newTranslateX=-currentSlide*slideWidth;$sliderWrapper.find(".slide").each((function(index){const $slide=$(this),$img=$slide.find("img");$slide.css({transform:"translateX("+newTranslateX+"px)",transition:"transform 0.5s ease"}),index===currentSlide&&($img.css("animation","none"),$img[0].offsetWidth,$img.css("animation","slideAnimation 15s linear infinite"))}))}function startInteraction(e){isInteracting=!0,startPos="touchstart"===e.type?e.touches[0].pageX:e.pageX,$sliderWrapper.css("cursor","grabbing")}function moveInteraction(e){if(isInteracting){var currentPos="touchmove"===e.type?e.touches[0].pageX:e.pageX,distance=currentPos-startPos;Math.abs(distance)>=$sliderWrapper.width()/4&&(currentSlide=distance>0?currentSlide>0?currentSlide-1:totalSlides-1:currentSlide<totalSlides-1?currentSlide+1:0,startAutoSlide(),moveSlider(),startPos=currentPos,isInteracting=!1,$sliderWrapper.css("cursor","grab"))}}function endInteraction(){isInteracting=!1,$sliderWrapper.css("cursor","grab")}function startAutoSlide(){clearInterval(autoSlideInterval),autoSlideInterval=setInterval(advanceSlide,7e3)}function advanceSlide(){currentSlide<totalSlides-1?currentSlide++:currentSlide=0,moveSlider()}}))}));